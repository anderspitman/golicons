(function webpackUniversalModuleDefinition(root, factory) {
	if(typeof exports === 'object' && typeof module === 'object')
		module.exports = factory();
	else if(typeof define === 'function' && define.amd)
		define([], factory);
	else if(typeof exports === 'object')
		exports["golicons"] = factory();
	else
		root["golicons"] = factory();
})(window, function() {
return /******/ (function(modules) { // webpackBootstrap
/******/ 	// The module cache
/******/ 	var installedModules = {};
/******/
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/
/******/ 		// Check if module is in cache
/******/ 		if(installedModules[moduleId]) {
/******/ 			return installedModules[moduleId].exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = installedModules[moduleId] = {
/******/ 			i: moduleId,
/******/ 			l: false,
/******/ 			exports: {}
/******/ 		};
/******/
/******/ 		// Execute the module function
/******/ 		modules[moduleId].call(module.exports, module, module.exports, __webpack_require__);
/******/
/******/ 		// Flag the module as loaded
/******/ 		module.l = true;
/******/
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/
/******/
/******/ 	// expose the modules object (__webpack_modules__)
/******/ 	__webpack_require__.m = modules;
/******/
/******/ 	// expose the module cache
/******/ 	__webpack_require__.c = installedModules;
/******/
/******/ 	// define getter function for harmony exports
/******/ 	__webpack_require__.d = function(exports, name, getter) {
/******/ 		if(!__webpack_require__.o(exports, name)) {
/******/ 			Object.defineProperty(exports, name, { enumerable: true, get: getter });
/******/ 		}
/******/ 	};
/******/
/******/ 	// define __esModule on exports
/******/ 	__webpack_require__.r = function(exports) {
/******/ 		if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 			Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 		}
/******/ 		Object.defineProperty(exports, '__esModule', { value: true });
/******/ 	};
/******/
/******/ 	// create a fake namespace object
/******/ 	// mode & 1: value is a module id, require it
/******/ 	// mode & 2: merge all properties of value into the ns
/******/ 	// mode & 4: return value when already ns object
/******/ 	// mode & 8|1: behave like require
/******/ 	__webpack_require__.t = function(value, mode) {
/******/ 		if(mode & 1) value = __webpack_require__(value);
/******/ 		if(mode & 8) return value;
/******/ 		if((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;
/******/ 		var ns = Object.create(null);
/******/ 		__webpack_require__.r(ns);
/******/ 		Object.defineProperty(ns, 'default', { enumerable: true, value: value });
/******/ 		if(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));
/******/ 		return ns;
/******/ 	};
/******/
/******/ 	// getDefaultExport function for compatibility with non-harmony modules
/******/ 	__webpack_require__.n = function(module) {
/******/ 		var getter = module && module.__esModule ?
/******/ 			function getDefault() { return module['default']; } :
/******/ 			function getModuleExports() { return module; };
/******/ 		__webpack_require__.d(getter, 'a', getter);
/******/ 		return getter;
/******/ 	};
/******/
/******/ 	// Object.prototype.hasOwnProperty.call
/******/ 	__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };
/******/
/******/ 	// __webpack_public_path__
/******/ 	__webpack_require__.p = "";
/******/
/******/
/******/ 	// Load entry module and return exports
/******/ 	return __webpack_require__(__webpack_require__.s = "./src/index.js");
/******/ })
/************************************************************************/
/******/ ({

/***/ "./src/core.js":
/*!*********************!*\
  !*** ./src/core.js ***!
  \*********************/
/*! exports provided: registerPlugin, registerPattern, start */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"registerPlugin\", function() { return registerPlugin; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"registerPattern\", function() { return registerPattern; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"start\", function() { return start; });\nconst SVG_NS = 'http://www.w3.org/2000/svg';\n\nconst names = {};\nfunction registerPlugin(name, func) {\n  registerName(name, func); \n}\n\nfunction registerPattern(name, patternText) {\n  const pluginFunc = (golicon) => {\n    const patternFunc = () => {\n      return parsePattern(patternText);\n    };\n    golicon.setPatternFunc(patternFunc);\n  };\n\n  registerPlugin(name, pluginFunc); \n}\n\nfunction start() {\n\n  insertDefaultStyles();\n\n  const golis = document.getElementsByClassName('goli');\n\n  for (const goli of golis) {\n    const gol = new GOL(goli);\n    gol.start();\n  }\n}\n\nfunction parsePattern(patternText) {\n  const rows = [];\n  for (let line of patternText.split('\\n')) {\n\n    line = line.trim();\n\n    if (line === '') {\n      continue;\n    }\n\n    const row = [];\n    rows.push(row);\n    \n    for (const char of line) {\n      let cell;\n      if (char === '0') {\n        cell = 0;\n      }\n      else if (char === '1') {\n        cell = 1;\n      }\n      else {\n        throw \"Error parsing pattern char: \" + char;\n      }\n\n      row.push(cell);\n    }\n  }\n\n  return rows;\n}\n\nfunction registerName(name, value) {\n  const fullName = 'goli-' + name;\n  if (names[fullName]) {\n    throw \"golicons name '\" + name + \"' already in use\";\n  }\n  names[fullName] = value;\n}\n\nfunction insertDefaultStyles() {\n  const style = document.createElement('style');\n  style.type = 'text/css';\n  let styles = '';\n  \n  styles += '.goli { width: 32px; height: 32px; }';\n  styles += '.goli-live { fill: #000; }';\n  styles += '.goli-dead { fill: #fff; stroke: #000; }';\n\n  const node = document.createTextNode(styles);\n  style.appendChild(node);\n\n  const head = document.getElementsByTagName('head')[0];\n\n  head.insertBefore(style, head.firstChild);\n}\n\nclass GOL {\n  constructor(el) {\n    this._el = el;\n\n    this._tickDelayMs = 1000;\n\n    this._parseClassOptions();\n\n    this._state = this._patternFunc(); \n    this._newState = this._patternFunc(); \n    this._cells = [];\n\n    this._numRows = this._state.length;\n    this._numCols = this._state[0].length;\n\n    const dim = el.getBoundingClientRect();\n    const cellWidth = dim.width / this._numCols;\n    const cellHeight = dim.height / this._numRows;\n\n    const svg = document.createElementNS(SVG_NS, 'svg');\n    svg.style.width = '100%';\n    svg.style.height = '100%';\n    el.appendChild(svg);\n    \n    for (let i = 0; i < this._state.length; i++) {\n      const row = document.createElementNS(SVG_NS, 'g');\n      this._cells[i] = [];\n      row.classList.add('goli-row');\n      row.setAttribute('transform', 'translate(0, ' + i*cellHeight + ')');\n      svg.appendChild(row);\n      for (let j = 0; j < this._state[0].length; j++) {\n        const cell = document.createElementNS(SVG_NS, 'rect');\n        cell.setAttribute('width', cellWidth);\n        cell.setAttribute('height', cellHeight);\n        cell.setAttribute('x', j*cellWidth);\n        row.appendChild(cell);\n        this._cells[i][j] = cell;\n      }\n    }\n\n    this.render();\n  }\n\n  _parseClassOptions() {\n    const classList = this._el.classList;\n\n    for (const klass of classList) {\n      if (klass.startsWith('goli-tick-ms')) {\n        this._tickDelayMs = Number(klass.slice(13));\n      }\n      else {\n        // class not recognized; check if there's a plugin for it\n        if (names[klass]) {\n          names[klass](this);\n        }\n        else if (klass.startsWith('goli-')) {\n          throw \"Unrecognized golicons class: \" + klass;\n        }\n      }\n    }\n  }\n\n  setPatternFunc(func) {\n    this._patternFunc = func;\n  }\n  \n  start() {\n    setInterval(() => {\n      this.tick();\n      requestAnimationFrame(this.render.bind(this));\n    }, this._tickDelayMs);\n  }\n\n  printState() {\n    for (let i = 0; i < this._state.length; i++) {\n      const row = this._state[i];\n      console.log(JSON.stringify(row), i);\n    }\n    console.log();\n  }\n\n  tick() {\n    copyState(this._state, this._newState);\n\n    for (let i = 0; i < this._state.length; i++) {\n      for (let j = 0; j < this._state[0].length; j++) {\n        const neighbors = this.neighbors(i, j);\n\n        let liveCount = 0;\n\n        // TODO: this can be generated on the fly in neighbors\n        for (const neighbor of neighbors) {\n          if (neighbor === 1) {\n            liveCount++;\n          }\n        }\n\n        const currentState = this._state[i][j];\n        let newState = currentState;\n        if (currentState === 1) {\n          if (liveCount < 2) {\n            // underpopulation\n            newState = 0;\n          }\n          else if (liveCount > 3) {\n            // overpopulation\n            newState = 0;\n          }\n          else {\n            // stays live\n            newState = 1;\n          }\n        }\n        else {\n          if (liveCount === 3) {\n            // reproduction\n            newState = 1;\n          }\n        }\n\n        this._newState[i][j] = newState;\n      }\n    }\n\n    copyState(this._newState, this._state);\n  }\n\n  neighbors(i, j) {\n    // TODO: get rid of this allocation\n    const n = [];\n    n.push(this.topLeft(i, j));\n    n.push(this.top(i, j));\n    n.push(this.topRight(i, j));\n    n.push(this.left(i, j));\n    n.push(this.right(i, j));\n    n.push(this.bottomLeft(i, j));\n    n.push(this.bottom(i, j));\n    n.push(this.bottomRight(i, j));\n    return n;\n  }\n\n  wrapTop(i) {\n    if (i === 0) {\n      return this._state.length - 1;\n    }\n    return i - 1;\n  }\n\n  wrapLeft(j) {\n    if (j === 0) {\n      return this._state[0].length - 1;\n    }\n    return j - 1;\n  }\n\n  wrapRight(j) {\n    if (j === this._state[0].length - 1) {\n      return 0;\n    }\n    return j + 1;\n  }\n\n  wrapBottom(i) {\n    if (i === this._state.length - 1) {\n      return 0;\n    }\n    return i + 1;\n  }\n\n  topLeft(i, j) {\n    return this._state[this.wrapTop(i)][this.wrapLeft(j)];\n  }\n\n  top(i, j) {\n    return this._state[this.wrapTop(i)][j];\n  }\n\n  topRight(i, j) {\n    return this._state[this.wrapTop(i)][this.wrapRight(j)];\n  }\n\n  left(i, j) {\n    return this._state[i][this.wrapLeft(j)];\n  }\n\n  right(i, j) {\n    return this._state[i][this.wrapRight(j)];\n  }\n\n  bottomLeft(i, j) {\n    return this._state[this.wrapBottom(i)][this.wrapLeft(j)];\n  }\n\n  bottom(i, j) {\n    return this._state[this.wrapBottom(i)][j];\n  }\n\n  bottomRight(i, j) {\n    return this._state[this.wrapBottom(i)][this.wrapRight(j)];\n  }\n\n  render() {\n    for (let i = 0; i < this._numRows; i++) {\n      for (let j = 0; j < this._numCols; j++) {\n        const state = this._state[i][j];\n\n        if (state === 1) {\n          this._cells[i][j].classList.remove('goli-dead');\n          this._cells[i][j].classList.add('goli-live');\n        }\n        else {\n          this._cells[i][j].classList.remove('goli-live');\n          this._cells[i][j].classList.add('goli-dead');\n        }\n      }\n    }\n  }\n}\n\nfunction copyState(a, b) {\n  for (let i = 0; i < a.length; i++) {\n    for (let j = 0; j < a[0].length; j++) {\n      b[i][j] = a[i][j];\n    }\n  }\n}\n\n\n//# sourceURL=webpack://golicons/./src/core.js?");

/***/ }),

/***/ "./src/index.js":
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
/*! exports provided: version, start, registerPattern, registerPlugin */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"version\", function() { return version; });\n/* harmony import */ var _core__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./core */ \"./src/core.js\");\n/* harmony import */ var _patterns__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./patterns */ \"./src/patterns.js\");\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"start\", function() { return _core__WEBPACK_IMPORTED_MODULE_0__[\"start\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"registerPattern\", function() { return _core__WEBPACK_IMPORTED_MODULE_0__[\"registerPattern\"]; });\n\n/* harmony reexport (safe) */ __webpack_require__.d(__webpack_exports__, \"registerPlugin\", function() { return _core__WEBPACK_IMPORTED_MODULE_0__[\"registerPlugin\"]; });\n\n\n\n\nObject(_core__WEBPACK_IMPORTED_MODULE_0__[\"registerPattern\"])('blinker', _patterns__WEBPACK_IMPORTED_MODULE_1__[\"blinkerText\"]);\nObject(_core__WEBPACK_IMPORTED_MODULE_0__[\"registerPattern\"])('beacon', _patterns__WEBPACK_IMPORTED_MODULE_1__[\"beaconText\"]);\nObject(_core__WEBPACK_IMPORTED_MODULE_0__[\"registerPattern\"])('toad', _patterns__WEBPACK_IMPORTED_MODULE_1__[\"toadText\"]);\nObject(_core__WEBPACK_IMPORTED_MODULE_0__[\"registerPattern\"])('glider', _patterns__WEBPACK_IMPORTED_MODULE_1__[\"gliderText\"]);\n\nconst version = '0.4.0';\n\n\n\n//# sourceURL=webpack://golicons/./src/index.js?");

/***/ }),

/***/ "./src/patterns.js":
/*!*************************!*\
  !*** ./src/patterns.js ***!
  \*************************/
/*! exports provided: blinkerText, beaconText, toadText, gliderText */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"blinkerText\", function() { return blinkerText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"beaconText\", function() { return beaconText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"toadText\", function() { return toadText; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"gliderText\", function() { return gliderText; });\nconst blinkerText = `\n  00000\n  00000\n  01110\n  00000\n  00000\n`;\n\nconst beaconText = `\n  000000\n  011000\n  011000\n  000110\n  000110\n  000000\n`;\n\nconst toadText = `\n  000000\n  000000\n  001110\n  011100\n  000000\n  000000\n`;\n\nconst gliderText = `\n  000000\n  001000\n  000100\n  011100\n  000000\n  000000\n`;\n\n\n//# sourceURL=webpack://golicons/./src/patterns.js?");

/***/ })

/******/ });
});