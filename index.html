<!doctype html>
<html>
  <head>
    <title>golicons</title>
    <link href="/lib/prism.css" rel="stylesheet" />
    <meta charset="utf-8"> 
    
    <template id='example-template'>
      <div><strong>Code:</strong></div>
      <pre><code class='listing language-markup'></code></pre>
      <div><strong>Result:</strong></div>
      <iframe class='iframe' ></iframe>
    </template>

    <template class='example' id='example-1'><!--<!doctype html>
<html lang='en'>
  <head>
    <meta charset="utf-8"> 
  </head>
  <body>
    <div class='goli goli-glider'></div>
    <script src='https://cdn.jsdelivr.net/npm/golicons@0.5.0/dist/golicons.min.js'></script>
    <script>
      golicons.start();
    </script>
  </body>
</html>--></template>

    <template class='example' id='example-2'><!--<!doctype html>
<html lang='en'>
  <head>
    <meta charset="utf-8"> 
    <style>
    </style>
  </head>
  <body>

    <div class='goli goli-my-awesome-pattern'></div>

    <script src='https://cdn.jsdelivr.net/npm/golicons@0.5.0/dist/golicons.min.js'></script>
    <script>
      const patternStr = `
        000000
        011110
        010010
        010000
        010110
        010010
        011110
        000000
      `;

      golicons.registerPattern('my-awesome-pattern', patternStr);

      golicons.start();
    </script>
  </body>
</html>--></template>

    <style>

      body {
        /*background-color: #eeeeee;*/
      }

      .heading {
        font-size: 50px;
        text-align: center;
      }

      .content {
        margin: 0 auto;
        font-family: Courier New, monospace;
        max-width: 900px;
        color: #111;
      }

      .content p {
        font-size: 20px;
        line-height: 1.5;
      }

      iframe {
        width: 100%;
        height: 256px;
      }

      .examples {
        display: flex;
        flex-direction: row;
        justify-content: center;
      }

      #goliconator-container {
        width: 100%;
        background-color: #dedede;
      }

      #goliconator {
        width: 50%;
        margin: 0 auto;
      }

      .goli-goliconator .goli-dead {
        /*stroke: none;*/
      }

      .examples .goli {
        width: 48px;
        height: 48px;
        margin: 20px;
      }
    </style>
  </head>
  <body>
    <div class='content'>
      <!--
      <h1 class='heading' >GOLicons</h1>
      -->
      <div id='goliconator-container'>
        <div id='goliconator' class='goli goli-goliconator goli-tick-ms-1000 goli-start-delay-ms-2000'></div>
      </div>
      <p>
        <strong>golicons</strong> are SVG icons which are animated with
        JavaScript to simulate
        <a target='_blank'
            href='https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life'>
          Conway's Game of Life.
        </a>
        The code is open source (MIT) and available
        <a target='_blank'
            href='https://github.com/anderspitman/golicons'>
          on GitHub.
        </a>

      </p>
      <div class='examples'>
        <div class='goli goli-blinker goli-tick-ms-1000'></div>
        <div class='goli goli-glider goli-tick-ms-200'></div>
        <div class='goli goli-toad goli-tick-ms-300'></div>
        <div class='goli goli-beacon goli-tick-ms-300'></div>
      </div>

      <p>
        Getting started is a piece of cake:
      </p>

      <div id='example-1-container'></div>

      <p>
        However, chances are that you'll want to use some of your own patterns:
      </p>

      <div id='example-2-container'></div>

    </div>

    <!--
    <script src='https://cdn.jsdelivr.net/npm/golicons@0.5.0/dist/golicons.min.js'></script>
    -->
    <script src='/dist/golicons.min.js'></script>
    <script>

      // poor man's templating engine. This allows me to use the templates
      // in <head> as the source for both the syntax highlighted snippets and
      // the iframe. This was the examples will always be running the code
      // that is shown.
      const exampleTemplates = document.getElementsByClassName('example');
      const template = document.getElementById('example-template');
      for (const example of exampleTemplates) {
        const templateClone = document.importNode(template.content, true);
        const id = example.id;
        const listing = templateClone.querySelector('.listing');
        const iframe = templateClone.querySelector('.iframe');

        listing.innerHTML = example.innerHTML;
        const stripped = example.innerHTML.slice(4, example.innerHTML.length - 3);
        iframe.srcdoc = stripped;

        const container = document.getElementById(id + '-container');
        container.appendChild(templateClone);
      }

      const goliconsPattern = `
        0000000000000000000000000000000000000000
        0111101111010000111011110111101001011110
        0100101001010000010010010100101101010000
        0100001001010000010010000100101101011100
        0101101001010000010010000100101011000010
        0100101001010000010010010100101011000010
        0111101111011110111011110111101001011110
        0000000000000000000000000000000000000000
      `;

      const numRows = 8;
      const numCols = 40;
      const aspectRatio = numCols / numRows; 
      console.log(aspectRatio);

      const goliconatorEl = document.getElementById('goliconator');
      const dim = goliconatorEl.getBoundingClientRect();
      console.log(dim);
      goliconatorEl.style.height = ((1 / aspectRatio) * dim.width) + 'px';

      golicons.registerPattern('goliconator', goliconsPattern);

      console.log(golicons.version);
      golicons.start();

    </script>

    <!-- syntax highlighting -->
    <script src='/lib/prism.js'></script>

  </body>
</html>
